## Notebook for computing buffers

```{r}
source('utils.R')
library(leaflet)
library(mapview)
library(htmltools)
```

#### Load the data
```{r}
db <- readRDS("./data/master_db_filtered.rds")
```

#### Preparing the data for computing buffers

```{r}
db <- sample_n(db, 4000)
db$latitud <- as.numeric(db$latitud)
db$longitud <- as.numeric(db$longitud)

```

#### Function for generating buffers

```{r}
# call our function for calculating buffers
buff_test <- calc_buffers(db, 4000)
# extract relevant elements
df_buffers <- buff_test$df_buffers
proj_buffers <- buff_test$buffers_proj
```

#### Saving the generated buffers
```{r}
saveRDS(df_buffers, "./data/df_buffers_test.rds")
saveRDS(proj_buffers, "./data/proj_buffers_test.rds")
```

#### Visualizing buffers in maps

```{r}
# map
map_buffers(proj_buffers, df_buffers)
```

